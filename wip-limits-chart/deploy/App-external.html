<!DOCTYPE html>
<html>
<head>
    <title>wip-limits-chart</title>

    <script type="text/javascript" src="https://10.32.16.145/apps/2.0rc2/sdk.js"></script>

    <script type="text/javascript">
        Rally.onReady(function () {
                Ext.define("RallyFunctions",function(){var self;return{config:{ctx:{}},constructor:function(config){return self=this,this.initConfig(config),this},_wsapiQuery:function(config,callback){var storeConfig={autoLoad:!0,limit:"Infinity",model:config.model,fetch:config.fetch,filters:config.filters,listeners:{scope:this,load:function(store,data){callback(null,data)}}};_.isUndefined(config.context)||(storeConfig.context=config.context),Ext.create("Rally.data.WsapiDataStore",storeConfig)},createFilter:function(releaseName,iterationName){var filter=null;if(_.isNull(releaseName)||(filter=Ext.create("Rally.data.wsapi.Filter",{property:"Release.Name",operator:"=",value:releaseName})),!_.isNull(iterationName)){var ifilter=Ext.create("Rally.data.wsapi.Filter",{property:"Iteration.Name",operator:"=",value:iterationName});filter=_.isNull(filter)?ifilter:filter.and(ifilter)}return filter},createFeatureFilter:function(releaseName){var filter=null;return _.isNull(releaseName)||(filter=Ext.create("Rally.data.wsapi.Filter",{property:"Release.Name",operator:"=",value:releaseName})),filter},subscribe:function(app){app.subscribe(app,"timeboxReleaseChanged",app._timeboxChanged,app),app.subscribe(app,"timeboxIterationChanged",app._timeboxChanged,app)}}});
                Ext.define("ProjectStories",function(){var self;return{config:{ctx:{},filter:null,featureFilter:null},constructor:function(config){return self=this,this.initConfig(config),this},readProjectStories:function(callback){var fns=[self.readStates.bind(self),self.readProjects.bind(self),self.getReportProjects.bind(self),self.readStories.bind(self)];null!==self.featureFilter&&(fns=[self.readStates.bind(self),self.readFeatureTypes.bind(self),self.readProjects.bind(self),self.getReportProjects.bind(self),self.readStories.bind(self),self.readFeatures.bind(self)]),async.waterfall(fns,function(err,result){callback(null,self.stories,self.reportProjects,self.scheduleStates,self.features)})},readStates:function(callback){var that=this;Rally.data.ModelFactory.getModel({type:"UserStory",success:function(model){model.getField("ScheduleState").getAllowedValueStore().load({callback:function(records,operation,success){self.scheduleStates=_.map(records,function(r){return r.get("StringValue")}),callback(null)}})}})},readFeatureTypes:function(callback){var that=this,configs=[{model:"TypeDefinition",fetch:!0,filters:[{property:"Ordinal",operator:"=",value:0}]}];async.map(configs,self._wsapiQuery,function(err,results){self.featureType=_.first(_.first(results)).get("TypePath"),callback(null)})},readProjects:function(callback){var that=this,config={model:"Project",fetch:!0,filters:[]};self._wsapiQuery(config,callback)},getReportProjects:function(projects,callback){self.projects=projects,self.reportProjects=_.filter(projects,function(project){return self._isChildOf(project,self.ctx.getProject())}),0===self.reportProjects.length&&self.reportProjects.push(_.find(self.projects,function(project){return project.get("ObjectID")===self.ctx.getProject().ObjectID})),callback(null)},readStories:function(callback){var configs=_.map(self.reportProjects,function(project){return{model:"HierarchicalRequirement",filters:[self.filter],fetch:["ObjectID","ScheduleState","PlanEstimate","Project"],context:{project:project.get("_ref"),projectScopeUp:!1,projectScopeDown:!0}}});async.map(configs,self._wsapiQuery,function(error,results){self.stories=results,callback(null)})},readFeatures:function(callback){var configs=_.map(self.reportProjects,function(project){return{model:self.featureType,filters:[self.featureFilter],fetch:["FormattedID","Name","ObjectID","LeafStoryCount","LeafStoryPlanEstimateTotal","PreliminaryEstimate","AcceptedLeafStoryCount","AcceptedLeafStoryPlanEstimateTotal","PercentDoneByStoryCount","c_ValueMetricKPI","Rank"],order:[{property:"DragAndDropRank",direction:"ASC"}],context:{project:project.get("_ref"),projectScopeUp:!1,projectScopeDown:!0}}});async.map(configs,self._wsapiQuery,function(error,results){self.features=results,callback(null)})},_wsapiQuery:function(config,callback){var storeConfig={autoLoad:!0,limit:"Infinity",model:config.model,fetch:config.fetch,filters:config.filters,listeners:{scope:this,load:function(store,data){callback(null,data)}}};_.isUndefined(config.context)||(storeConfig.context=config.context),_.isUndefined(config.order)||(storeConfig.order=config.order),Ext.create("Rally.data.WsapiDataStore",storeConfig)},_isChildOf:function(child,parent){var childParentRef=_.isNull(child.get("Parent"))?"null":child.get("Parent")._ref;return parent._ref.indexOf(childParentRef)>-1}}});
                Ext.define("timebox-selector",{extend:"Ext.Container",componentCls:"app",alias:"widget.timebox-selector",cls:"timebox-selector",layout:"hbox",width:"100%",mixins:["Rally.Messageable"],constructor:function(){this.stateId=Rally.environment.getContext().getScopedStateId("timebox-filter"),this.callParent(arguments)},initComponent:function(){this.callParent(arguments),this._createReleaseCombo(),this.addEvents("releasechange","iterationchange"),this.subscribe(this,"requestTimebox",this._requestTimebox,this)},_createReleaseCombo:function(){this._releaseCombo=this.add({xtype:"rallyreleasecombobox",fieldLabel:"Program Increment",hideLabel:!1,labelPad:5,labelSeparator:":",labelWidth:130,width:280,labelAlign:"right",stateful:!1,stateId:"releasecombo",padding:5,context:Rally.environment.getContext(),showArrows:!1,growToLongestValue:!0,defaultToCurrentTimebox:!0,listeners:{change:function(t,newVal,oldVal,eOpts){var release=t.getRecord();this.fireEvent("releasechange",release),console.log("Publishing Release:",release),this.publish("timeboxReleaseChanged",release),this._updateIterationCombo(release)},scope:this}})},_updateIterationCombo:function(release){this.remove("globaliterationpicker");var endFilter=Ext.create("Rally.data.wsapi.Filter",{property:"EndDate",operator:"<=",value:Rally.util.DateTime.toIsoString(release.get("ReleaseDate"))}),startFilter=Ext.create("Rally.data.wsapi.Filter",{property:"StartDate",operator:">=",value:Rally.util.DateTime.toIsoString(release.get("ReleaseStartDate"))}),filters=endFilter.and(startFilter);this._iterationCombo=this.add({xtype:"rallyiterationcombobox",itemId:"globaliterationpicker",fieldLabel:"Sprint/Iteration",hideLabel:!1,labelPad:5,labelSeparator:":",labelWidth:100,labelAlign:"right",stateful:!1,padding:5,context:Rally.environment.getContext(),showArrows:!1,growToLongestValue:!0,stateId:"iterationcombo",allowBlank:!0,allowClear:!0,allowNoEntry:!0,noEntryText:"PI Scope",emptyText:"PI Scope",noEntryValue:null,defaultToCurrentTimebox:!1,defaultSelectPosition:"first",storeConfig:{remoteFilter:!0,filters:filters},listeners:{change:function(t,newVal,oldVal,eOpts){var iteration=t.getRecord();this.fireEvent("iterationchange",iteration),this.publish("timeboxIterationChanged",iteration)},scope:this}})},_requestTimebox:function(source){console.log("Got request timebox message",source);var release=this.getReleaseRecord();console.log("release",release),release&&this.publish("timeboxReleaseChanged",release);var iteration=this.getIterationRecord();console.log("iteration",iteration),iteration&&this.publish("timeboxIterationChanged",iteration)},getReleaseRecord:function(){return this._releaseCombo?this._releaseCombo.getRecord()||null:null},getIterationRecord:function(){return this._iterationCombo?this._iterationCombo.getRecord()||null:null}});
                Ext.define("CustomApp",{extend:"Rally.app.App",componentCls:"app",items:[{xtype:"container",itemId:"settings_box"},{xtype:"container",itemId:"selector_box"}],release:null,iteration:null,config:{defaultSettings:{stacking:!0,showScopeSelector:!1}},launch:function(){this.isExternal()?this.showSettings(this.config):this.onSettingsUpdate(this.getSettings())},_launch:function(settings){console.log("_launch");var that=this;console.log("Settings:",settings),settings.showScopeSelector===!0||"true"===settings.showScopeSelector?this.down("#selector_box").add({xtype:"timebox-selector",context:this.getContext(),listeners:{releasechange:function(release){this._changeRelease(release)},iterationchange:function(iteration){this._changeIteration(iteration)},scope:this}}):(this.subscribe(this,"timeboxReleaseChanged",this._changeRelease,this),this.subscribe(this,"timeboxIterationChanged",this._changeIteration,this),this.publish("requestTimebox",this)),that.run(release,iteration)},_changeRelease:function(release){this.release!==release&&(this.release=release,this.run(release.get("Name"),null))},_changeIteration:function(iteration){iteration!==this.iteration&&(this.iteration=iteration,this.run(null,iteration.get("Name"),null))},run:function(releaseName,iterationName){var that=this;this.setLoading("Loading..."),that.rallyFunctions=Ext.create("RallyFunctions");var pr=Ext.create("ProjectStories",{ctx:that.getContext(),filter:that.rallyFunctions.createFilter(releaseName,iterationName)});pr.readProjectStories(function(error,stories,projects,states){that.readWipValues(projects,function(error,wipLimits){that.prepareChartData(stories,projects,wipLimits,function(error,categories,series){that.createChart(categories,series)})})})},_timeboxChanged:function(timebox){var that=this;console.log("WIP Limits Chart:_timeboxChanged received"),"release"===timebox.get("_type")?that.run(timebox.get("Name"),null):that.run(null,timebox.get("Name"))},getTimeboxScope:function(){var timeboxScope=this.getContext().getTimeboxScope();return timeboxScope?{type:timeboxScope.getType(),name:timeboxScope.getRecord().get("Name")}:null},onTimeboxScopeChange:function(newTimeboxScope){this.callParent(arguments),newTimeboxScope&&"iteration"===newTimeboxScope.getType()?this.run(null,newTimeboxScope.getRecord().get("Name")):newTimeboxScope&&"release"===newTimeboxScope.getType()&&this.run(newTimeboxScope.getRecord().get("Name"),null)},readWipValues:function(projects,callback){var that=this,projectKeys=_.map(projects,function(p){return p.get("Name")}),states=["In-Progress","Completed"],keys=_.flatten(_.map(projectKeys,function(pKey){return _.map(states,function(state){return"project-wip:"+pKey+":"+state+"WIP"})})),configs=_.map(keys,function(key){return{model:"Preference",filters:[{property:"Name",operator:"=",value:key}],fetch:!0}});async.map(configs,that.rallyFunctions._wsapiQuery,function(error,results){callback(null,_.flatten(results))})},prepareChartData:function(stories,projects,wipLimits,callback){var that=this,categories=_.map(projects,function(p){return _.last(p.get("Name").split(">"))}),states=["In-Progress","Completed"],pointsValue=function(value){return _.isUndefined(value)||_.isNull(value)?0:value},summarize=function(workItems,states){var stateTotal=_.reduce(workItems,function(memo,workItem){return memo+(_.indexOf(states,workItem.get("ScheduleState"))>-1?1:0)},0);return stateTotal},wipForProjectAndState=function(project,state){var wip=_.find(wipLimits,function(limit){return-1!==limit.get("Name").indexOf(project.get("Name"))&&-1!==limit.get("Name").indexOf(state)});if(_.isUndefined(wip)||_.isNull(wip))return 0;var val=wip.get("Value").replace(/"/g,"");return parseInt(val,10)},seriesData=_.map(states,function(state){var counts=_.map(categories,function(project,index){return summarize(stories[index],[state])}),wips=_.map(categories,function(project,index){return wipForProjectAndState(projects[index],state)});return{name:state,data:_.map(categories,function(project,index){return counts[index]-wips[index]})}});callback(null,categories,seriesData)},createChart:function(categories,seriesData,callback){var that=this;this.setLoading(!1),_.isUndefined(that.chart)||that.remove(that.chart),that.chart=Ext.create("Rally.technicalservices.wipChart",{itemId:"rally-chart",chartData:{series:seriesData,categories:categories},title:"WIP Limits by Projecgt",stacking:that.getSetting("stacking")}),that.add(that.chart);var chart=this.down("#rally-chart"),p=Ext.get(chart.id),elems=p.query("div.x-mask");_.each(elems,function(e){Ext.isIE9?e.removeNode():e.remove()});var elems=p.query("div.x-mask-msg");_.each(elems,function(e){Ext.isIE9?e.removeNode():e.remove()})},isExternal:function(){return this.getAppId()===void 0},showSettings:function(options){return this._appSettings=Ext.create("Rally.app.AppSettings",Ext.apply({fields:this.getSettingsFields(),settings:this.getSettings(),defaultSettings:this.getDefaultSettings(),context:this.getContext(),settingsScope:this.settingsScope,autoScroll:!0},options)),this._appSettings.on("cancel",this._hideSettings,this),this._appSettings.on("save",this._onSettingsSaved,this),this.isExternal()?void 0===this.down("#settings_box").getComponent(this._appSettings.id)&&this.down("#settings_box").add(this._appSettings):(this.hide(),this.up().add(this._appSettings)),this._appSettings},_onSettingsSaved:function(settings){Ext.apply(this.settings,settings),this._hideSettings(),this.onSettingsUpdate(settings)},onSettingsUpdate:function(settings){console.log("onSettingsUpdate",settings),Ext.apply(this,settings),this._launch(settings)},getSettingsFields:function(){return[{name:"showScopeSelector",xtype:"rallycheckboxfield",boxLabelAlign:"after",fieldLabel:"",margin:"0 0 25 200",boxLabel:'Show Scope Selector<br/><span style="color:#999999;"><i>Tick to use this to broadcast settings.</i></span>'},{name:"stacking",xtype:"rallycheckboxfield",boxLabelAlign:"after",fieldLabel:"",margin:"0 0 25 200",boxLabel:"If true the chart values will be stacked, otherwise shown side by side"}]}});
                Ext.define("Rally.technicalservices.wipChart",{extend:"Rally.ui.chart.Chart",alias:"widget.wipchart",itemId:"rally-chart",chartData:{},loadMask:!1,chartColors:[],chartConfig:{colors:["#00a9e0","#8dc63f"],chart:{type:"bar"},title:{text:"WIP Limits Chart"},xAxis:{},yAxis:[{title:{text:"Under / Over WIP Limits"}}],plotOptions:{series:{dataLabels:{enabled:!0,color:"#FFFFFF"},stacking:"normal"}}},constructor:function(config){this.callParent(arguments),config.title&&(this.chartConfig.title=config.title),_.isUndefined(config.stacking)||(this.chartConfig.plotOptions.series.stacking=config.stacking===!0?"normal":null)}});
                (function(){function F(){}function b(K){var L=!1;return function(){if(L)throw Error("Callback was already called.");L=!0,K.apply(this,arguments)}}function j(K){var L=!1;return function(){L||(L=!0,K.apply(this,arguments))}}function A(K){return G(K)||"number"==typeof K.length&&K.length>=0&&0===K.length%1}function B(K,L){return A(K)?E(K,L):H(K,L)}function E(K,M){for(var L=-1,N=K.length;N>++L;)M(K[L],L,K)}function n(L,N){for(var M=-1,O=L.length,K=Array(O);O>++M;)K[M]=N(L[M],M,L);return K}function e(K){return n(Array(K),function(L,M){return M})}function o(K,M,L){return E(K,function(N,P,O){L=M(L,N,P,O)}),L}function H(K,L){E(m(K),function(M){L(K[M],M)})}function g(M){var L=-1,K,O;return A(M)?(K=M.length,function N(){return L++,K>L?L:null}):(O=m(M),K=O.length,function N(){return L++,K>L?O[L]:null})}function q(L,O){O=O||0;var M=-1,N=L.length;O&&(N-=O,N=0>N?0:N);for(var K=Array(N);N>++M;)K[M]=L[M+O];return K}function c(K){return function(M,L,N){return K(M,N)}}function z(K){return function(Q,P,S){S=j(S||F),Q=Q||[];var L=g(Q);if(0>=K)return S(null);var M=!1,N=0,O=!1;(function R(){if(M&&0>=N)return S(null);for(;K>N&&!O;){var T=L();if(null===T)return M=!0,0>=N&&S(null),void 0;N+=1,P(Q[T],T,function(U){N-=1,U?(S(U),O=!0):R()})}})()}}function s(K){return function(M,L,N){return K(w.eachOf,M,L,N)}}function a(K,L){return function(N,M,O){return L(z(K),N,M,O)}}function y(K){return function(M,L,N){return K(w.eachOfSeries,M,L,N)}}function p(N,K,M,O){O=j(O||F);var L=[];N(K,function(Q,P,R){M(Q,function(T,S){L[P]=S,R(T)})},function(P){O(P,L)})}function f(K){return a(K,p)}function D(N,K,M,O){var L=[];K=n(K,function(P,Q){return{index:Q,value:P}}),N(K,function(P,Q,R){M(P.value,function(S){S&&L.push(P),R()})},function(){O(n(L.sort(function(Q,P){return Q.index-P.index}),function(P){return P.value}))})}function v(N,K,M,O){var L=[];K=n(K,function(P,Q){return{index:Q,value:P}}),N(K,function(P,Q,R){M(P.value,function(S){S||L.push(P),R()})},function(){O(n(L.sort(function(Q,P){return Q.index-P.index}),function(P){return P.value}))})}function t(M,K,L,N){M(K,function(O,P,Q){L(O,function(R){R?(N(O),N=F):Q()})},function(){N()})}function l(L,N,M){M=M||F;var K=A(N)?[]:{};L(N,function(O,P,Q){O(function(S){var R=q(arguments,1);1>=R.length&&(R=R[0]),K[P]=R,Q(S)})},function(O){M(O,K)})}function x(N,L,M,O){var K=[];N(L,function(Q,R,P){M(Q,function(S,T){K=K.concat(T||[]),P(S)})},function(P){O(P,K)})}function d(Q,N,P){function K(S,R,U,T){if(null!=T&&"function"!=typeof T)throw Error("task callback must be a function");return S.started=!0,G(R)||(R=[R]),0===R.length&&S.idle()?w.setImmediate(function(){S.drain()}):(E(R,function(V){var W={data:V,callback:T||F};U?S.tasks.unshift(W):S.tasks.push(W),S.tasks.length===S.concurrency&&S.saturated()}),w.setImmediate(S.process),void 0)}function M(R,S){return function(){L-=1;var T=arguments;E(S,function(U){U.callback.apply(U,T)}),0===R.tasks.length+L&&R.drain(),R.process()}}if(null==N)N=1;else if(0===N)throw Error("Concurrency must not be zero");var L=0,O={tasks:[],concurrency:N,saturated:F,empty:F,drain:F,started:!1,paused:!1,push:function(R,S){K(O,R,!1,S)},kill:function(){O.drain=F,O.tasks=[]},unshift:function(R,S){K(O,R,!0,S)},process:function(){if(!O.paused&&O.concurrency>L&&O.tasks.length)for(;O.concurrency>L&&O.tasks.length;){var T=P?O.tasks.splice(0,P):O.tasks.splice(0,O.tasks.length),S=n(T,function(U){return U.data});0===O.tasks.length&&O.empty(),L+=1;var R=b(M(O,T));Q(S,R)}},length:function(){return O.tasks.length},running:function(){return L},idle:function(){return 0===O.tasks.length+L},pause:function(){O.paused=!0},resume:function(){if(O.paused!==!1){O.paused=!1;for(var S=Math.min(O.concurrency,O.tasks.length),R=1;S>=R;R++)w.setImmediate(O.process)}}};return O}function I(K){return function(M){var L=q(arguments,1);M.apply(null,L.concat([function(O){var N=q(arguments,1);"undefined"!=typeof console&&(O?console.error&&console.error(O):console[K]&&E(N,function(P){console[K](P)}))}]))}}function u(K){return function(M,L,N){K(e(M),L,N)}}function i(N,L){function M(){var P=this,O=q(arguments),Q=O.pop();return N(L,function(T,S,R){T.apply(P,O.concat([R]))},Q)}if(arguments.length>2){var K=q(arguments,2);return M.apply(this,K)}return M}function J(K){return function(){var L=q(arguments),N=L.pop();L.push(function(){var O=arguments;M?w.setImmediate(function(){N.apply(null,O)}):N.apply(null,O)});var M=!0;K.apply(this,L),M=!1}}var w={},k,C;k="object"==typeof window&&this===window?window:"object"==typeof global&&this===global?global:this,null!=k&&(C=k.async),w.noConflict=function(){return k.async=C,w};var r=Object.prototype.toString,G=Array.isArray||function(K){return"[object Array]"===r.call(K)},m=Object.keys||function(M){var L=[];for(var K in M)M.hasOwnProperty(K)&&L.push(K);return L},h;"function"==typeof setImmediate&&(h=setImmediate),"undefined"!=typeof process&&process.nextTick?(w.nextTick=process.nextTick,w.setImmediate=h?function(K){h(K)}:w.nextTick):h?(w.nextTick=function(K){h(K)},w.setImmediate=w.nextTick):(w.nextTick=function(K){setTimeout(K,0)},w.setImmediate=w.nextTick),w.forEach=w.each=function(K,L,M){return w.eachOf(K,c(L),M)},w.forEachSeries=w.eachSeries=function(K,L,M){return w.eachOfSeries(K,c(L),M)},w.forEachLimit=w.eachLimit=function(K,L,M,N){return z(L)(K,c(M),N)},w.forEachOf=w.eachOf=function(L,O,P){function K(Q){Q?P(Q):(N+=1,N>=M&&P(null))}P=j(P||F),L=L||[];var M=A(L)?L.length:m(L).length,N=0;return M?(B(L,function(R,Q){O(L[Q],Q,b(K))}),void 0):P(null)},w.forEachOfSeries=w.eachOfSeries=function(N,M,O){function L(){var Q=!0,P=K();return null===P?O(null):(M(N[P],P,function(R){R?O(R):Q?w.nextTick(L):L()}),Q=!1,void 0)}O=j(O||F),N=N||[];var K=g(N);L()},w.forEachOfLimit=w.eachOfLimit=function(M,K,L,N){z(K)(M,L,N)},w.map=s(p),w.mapSeries=y(p),w.mapLimit=function(K,L,M,N){return f(L)(K,M,N)},w.inject=w.foldl=w.reduce=function(K,L,M,N){w.eachOfSeries(K,function(O,P,Q){M(L,O,function(S,R){L=R,Q(S)})},function(O){N(O||null,L)})},w.foldr=w.reduceRight=function(K,L,M,O){var N=n(K,function(P){return P}).reverse();w.reduce(N,L,M,O)},w.select=w.filter=s(D),w.selectSeries=w.filterSeries=y(D),w.reject=s(v),w.rejectSeries=y(v),w.detect=s(t),w.detectSeries=y(t),w.any=w.some=function(K,L,M){w.eachOf(K,function(N,O,P){L(N,function(Q){Q&&(M(!0),M=F),P()})},function(){M(!1)})},w.all=w.every=function(K,L,M){w.eachOf(K,function(N,O,P){L(N,function(Q){Q||(M(!1),M=F),P()})},function(){M(!0)})},w.sortBy=function(K,M,N){function L(R,Q){var P=R.criteria,O=Q.criteria;return O>P?-1:P>O?1:0}w.map(K,function(O,P){M(O,function(Q,R){Q?P(Q):P(null,{value:O,criteria:R})})},function(P,O){return P?N(P):(N(null,n(O.sort(L),function(Q){return Q.value})),void 0)})},w.auto=function(M,R){function K(T){Q.unshift(T)}function N(U){for(var T=0;Q.length>T;T+=1)if(Q[T]===U)return Q.splice(T,1),void 0}function P(){L--,E(Q.slice(0),function(T){T()})}R=j(R||F);var S=m(M),L=S.length;if(!L)return R(null);var O={},Q=[];K(function(){L||R(null,O)}),E(S,function(V){function aa(ad){var ab=q(arguments,1);if(1>=ab.length&&(ab=ab[0]),ad){var ac={};E(m(O),function(ae){ac[ae]=O[ae]}),ac[V]=ab,R(ad,ac)}else O[V]=ab,w.setImmediate(P)}function W(){return o(X,function(ac,ab){return ac&&O.hasOwnProperty(ab)},!0)&&!O.hasOwnProperty(V)}function Y(){W()&&(N(Y),U[U.length-1](aa,O))}for(var U=G(M[V])?M[V]:[M[V]],X=U.slice(0,Math.abs(U.length-1))||[],T=X.length,Z;T--;){if(!(Z=M[X[T]]))throw Error("Has inexistant dependency");if(G(Z)&&~Z.indexOf(V))throw Error("Has cyclic dependencies")}W()?U[U.length-1](aa,O):K(Y)})},w.retry=function(O,K,P){function N(S,Q){function R(T,U){return function(V){T(function(X,W){V(!X||U,{err:X,result:W})},Q)}}for(;O;)L.push(R(K,!(O-=1)));w.series(L,function(T,U){U=U[U.length-1],(S||P)(U.err,U.result)})}var M=5,L=[];return"function"==typeof O&&(P=K,K=O,O=M),O=parseInt(O,10)||M,P?N():N},w.waterfall=function(N,M){function L(O){return function(R){if(R)M.apply(null,arguments);else{var P=q(arguments,1),Q=O.next();Q?P.push(L(Q)):P.push(M),J(O).apply(null,P)}}}if(M=j(M||F),!G(N)){var K=Error("First argument to waterfall must be an array of functions");return M(K)}return N.length?(L(w.iterator(N))(),void 0):M()},w.parallel=function(L,K){l(w.eachOf,L,K)},w.parallelLimit=function(M,K,L){l(z(K),M,L)},w.series=function(M,L){L=L||F;var K=A(M)?[]:{};w.eachOfSeries(M,function(N,O,P){N(function(R){var Q=q(arguments,1);1>=Q.length&&(Q=Q[0]),K[O]=Q,P(R)})},function(N){L(N,K)})},w.iterator=function(L){function K(M){function N(){return L.length&&L[M].apply(null,arguments),N.next()}return N.next=function(){return L.length-1>M?K(M+1):null},N}return K(0)},w.apply=function(L){var K=q(arguments,1);return function(){return L.apply(null,K.concat(q(arguments)))}},w.concat=s(x),w.concatSeries=y(x),w.whilst=function(M,K,L){M()?K(function(N){return N?L(N):(w.whilst(M,K,L),void 0)}):L(null)},w.doWhilst=function(K,M,L){K(function(O){if(O)return L(O);var N=q(arguments,1);M.apply(null,N)?w.doWhilst(K,M,L):L(null)})},w.until=function(M,K,L){M()?L(null):K(function(N){return N?L(N):(w.until(M,K,L),void 0)})},w.doUntil=function(K,M,L){K(function(O){if(O)return L(O);var N=q(arguments,1);M.apply(null,N)?L(null):w.doUntil(K,M,L)})},w.queue=function(M,K){var L=d(function(O,N){M(O[0],N)},K,1);return L},w.priorityQueue=function(P,N){function M(R,Q){return R.priority-Q.priority}function L(V,T,U){for(var S=-1,Q=V.length-1;Q>S;){var R=S+(Q-S+1>>>1);U(T,V[R])>=0?S=R:Q=R-1}return S}function K(S,R,Q,T){if(null!=T&&"function"!=typeof T)throw Error("task callback must be a function");return S.started=!0,G(R)||(R=[R]),0===R.length?w.setImmediate(function(){S.drain()}):(E(R,function(U){var V={data:U,priority:Q,callback:"function"==typeof T?T:F};S.tasks.splice(L(S.tasks,V,M)+1,0,V),S.tasks.length===S.concurrency&&S.saturated(),w.setImmediate(S.process)}),void 0)}var O=w.queue(P,N);return O.push=function(R,Q,S){K(O,R,Q,S)},delete O.unshift,O},w.cargo=function(L,K){return d(L,1,K)},w.log=I("log"),w.dir=I("dir"),w.memoize=function(O,M){function K(){var P=q(arguments),R=P.pop(),Q=M.apply(null,P);Q in L?w.nextTick(function(){R.apply(null,L[Q])}):Q in N?N[Q].push(R):(N[Q]=[R],O.apply(null,P.concat([function(){L[Q]=q(arguments);var U=N[Q];delete N[Q];for(var T=0,S=U.length;S>T;T++)U[T].apply(null,arguments)}])))}var L={},N={};return M=M||function(P){return P},K.memo=L,K.unmemoized=O,K},w.unmemoize=function(K){return function(){return(K.unmemoized||K).apply(null,arguments)}},w.times=u(w.map),w.timesSeries=u(w.mapSeries),w.timesLimit=function(M,K,L,N){return w.mapLimit(e(M),K,L,N)},w.seq=function(){var K=arguments;return function(){var M=this,L=q(arguments),N=L.slice(-1)[0];"function"==typeof N?L.pop():N=F,w.reduce(K,L,function(P,Q,O){Q.apply(M,P.concat([function(){var S=arguments[0],R=q(arguments,1);O(S,R)}]))},function(P,O){N.apply(M,[P].concat(O))})}},w.compose=function(){return w.seq.apply(null,Array.prototype.reverse.call(arguments))},w.applyEach=function(){var K=q(arguments);return i.apply(null,[w.eachOf].concat(K))},w.applyEachSeries=function(){var K=q(arguments);return i.apply(null,[w.eachOfSeries].concat(K))},w.forever=function(N,O){function M(P){return P?K(P):(L(M),void 0)}var K=b(O||F),L=J(N);M()},w.ensureAsync=J,"undefined"!=typeof module&&module.exports?module.exports=w:"undefined"!=typeof define&&define.amd?define([],function(){return w}):k.async=w})();

            Rally.launchApp('CustomApp', {
                name:"wip-limits-chart",
	            parentRepos:""
            });

        });
    </script>


    <style type="text/css">
        
    </style>
</head>
<body>
</body>
</html>
